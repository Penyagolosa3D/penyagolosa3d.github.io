<!DOCTYPE html>
<html>	
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/dataTables.bootstrap.css" rel="stylesheet">
	</head>
	<body bgcolor='white'>
		<div class="pagina" id="Page1">
			<button class="boton" align="center" onclick="return show('Page2','Page1');">Lista de Objetos</button>
			<button class="boton" align="center" onclick="return downloadData(this);">Escribir Objetos</button>
			<a href="data.csv"> datos </a>
			<button class="boton" align="center" onclick="return show('Page3','Page1');">Lista de Ventas</button>
		</div>

		<div class="pagina" id="Page2" style="display:none">
			<div id='tablaObjetos'></div>
			<button class="boton" align="center" onclick="return show('Page1','Page2');">Inicio</button>
		</div>

		<div class="pagina" id="Page3" style="display:none">
			<div id="tablaVentas"></div>	
			<button class="boton" align="center" onclick="return show('Page1','Page3');">Inicio</button>
		</div>
		<script type="text/javascript" src="js/jquery.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/jquery.csv.min.js"></script>
		<script type="text/javascript" src="js/jquery.dataTables.min.js"></script>
		<script type="text/javascript" src="js/dataTables.bootstrap.js"></script>
		<script type="text/javascript" src="js/csv_to_html_table.js"></script>
		<script>
			function downloadData(){
				//get data from tabulator
				var data = ["casa","20"]

				//generate header row
				var csvContent = [Object.keys(data[0]).join(",")];

				//generate each row of the table
				data.forEach(function(row){
					var rowString = Object.values(row).join(",");
					csvContent.push(rowString);
				});

				//generate temporary link element to hold data
				var element = document.createElement('a');
				element.setAttribute('href', 'data:text/csv;charset=utf-8,' + encodeURIComponent(csvContent.join("\n")));
				element.setAttribute('download', "table_data.csv");

				//trigger download link and remove temporary element
				element.style.display = 'none';
				document.body.appendChild(element);
				element.click();
				document.body.removeChild(element);
			}
			CsvToHtmlTable.init({
				csv_path: 'data/listado.csv', 
				element: 'tablaObjetos', 
				allow_download: true,
				csv_options: {separator: ',', delimiter: '"'},
				datatables_options: {"paging": false}
			});
			CsvToHtmlTable.init({
				csv_path: 'data/ventas.csv', 
				element: 'tablaVentas', 
				allow_download: true,
				csv_options: {separator: ',', delimiter: '"'},
				datatables_options: {"paging": false}
			});
			function show(shown, hidden) {
				document.getElementById(shown).style.display='block';
				document.getElementById(hidden).style.display='none';
				return false;
			}
		</script>
	</body>
</html>
